<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JokerGPT - Joke &amp; Translate Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="main.css" />
  </head>

  <body class="min-h-screen py-8">
    <div class="container max-w-6xl mx-auto px-4">
      <!-- Header -->
      <header class="mb-12 text-center">
        <div class="inline-block p-3 bg-yellow-100 rounded-full mb-3">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-10 w-10 text-yellow-500 logo-icon"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path
              d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"
            ></path>
            <path
              d="M8 11c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zm8 0c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1zm-4 6c2.33 0 4.32-1.43 5.12-3.5H6.88c.8 2.07 2.79 3.5 5.12 3.5z"
            ></path>
          </svg>
        </div>
        <h1 class="text-4xl font-bold text-gray-800 mb-2">JokerGPT</h1>
        <p class="text-gray-600 max-w-lg mx-auto">
          Translate your favorite jokes or let me generate a new one!
        </p>
      </header>

      <!-- Main Content -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Translate Section -->
        <section
          class="joke-card bg-white p-6 rounded-2xl shadow-lg border border-gray-100"
        >
          <div class="flex items-center mb-5">
            <div class="p-2 bg-indigo-100 rounded-lg mr-3">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 text-indigo-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"
                ></path>
              </svg>
            </div>
            <h2 class="text-xl font-semibold text-gray-800">
              Translate a joke
            </h2>
          </div>

          <textarea
            id="translateInput"
            class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 mb-4 resize-none"
            rows="4"
            placeholder="Enter a joke to translate..."
          ></textarea>

          <div class="flex flex-col sm:flex-row gap-3 mb-4">
            <select
              id="languageSelect"
              class="language-select flex-grow px-4 py-3 rounded-xl border border-gray-200 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 appearance-none pr-10"
            >
              <option value="en">English</option>
              <option value="it">Italian</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="es">Spanish</option>
              <option value="pt">Portuguese</option>
              <option value="sv">Swedish</option>
              <option value="nl">Dutch</option>
              <option value="da">Danish</option>
              <option value="fi">Finnish</option>
              <option value="no">Norwegian</option>
              <option value="ru">Russian</option>
              <option value="zh">Chinese</option>
              <option value="ja">Japanese</option>
              <option value="ar">Arabic</option>
              <option value="hi">Hindi</option>
              <option value="pl">Polish</option>
              <option value="tr">Turkish</option>
            </select>

            <button
              id="translateBtn"
              class="btn-gradient text-white font-medium px-6 py-3 rounded-xl"
            >
              Traduci in English
            </button>
          </div>

          <div
            id="translateOutput"
            class="output-box bg-gray-50 rounded-xl p-4 border border-gray-200 text-gray-700"
          >
            <p class="text-gray-400 italic">
              The translation will appear here...
            </p>
          </div>
        </section>

        <!-- Joke Section -->
        <section
          class="joke-card bg-white p-6 rounded-2xl shadow-lg border border-gray-100"
        >
          <div class="flex items-center mb-5">
            <div class="p-2 bg-green-100 rounded-lg mr-3">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 text-green-600"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                ></path>
              </svg>
            </div>
            <h2 class="text-xl font-semibold text-gray-800">Get a joke</h2>
          </div>

          <div class="flex justify-center mb-6">
            <button
              id="jokeBtn"
              class="btn-joke text-white font-medium px-8 py-4 rounded-xl flex items-center"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 mr-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
                ></path>
              </svg>
              Make me laugh
            </button>
          </div>

          <div
            id="jokeOutput"
            class="output-box bg-gray-50 rounded-xl p-4 border border-gray-200 text-gray-700 flex items-center justify-center text-center"
          >
            <p class="text-gray-400 italic">Your joke will appear here...</p>
          </div>
        </section>
      </div>
    </div>

    <script>
      const BASE_URL = "https://biss25-joker.onrender.com/api/v1";
      document.getElementById("jokeBtn").addEventListener("click", async () => {
        const jokeOutput = document.getElementById("jokeOutput");

        // Show loading state
        jokeOutput.innerHTML =
          '<div class="flex items-center justify-center w-full"><svg class="animate-spin h-6 w-6 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>';
        jokeOutput.classList.add("active");

        try {
          const res = await fetch(`${BASE_URL}/joke`, {
            method: "GET",
            headers: { "Content-Type": "application/json" },
          });
          const data = await res.json();
          jokeOutput.innerText = data.joke;
        } catch (error) {
          jokeOutput.innerText =
            "Oops! Something went wrong. Please try again later.";
        }
      });

      document
        .getElementById("translateBtn")
        .addEventListener("click", async () => {
          const text = document.getElementById("translateInput").value;
          const lang = document.getElementById("languageSelect").value;
          const translateOutput = document.getElementById("translateOutput");

          if (!text.trim()) {
            translateOutput.innerText = "Please enter a joke to translate.";
            return;
          }

          // Show loading state
          translateOutput.innerHTML =
            '<div class="flex items-center justify-center w-full"><svg class="animate-spin h-6 w-6 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>';
          translateOutput.classList.add("active");

          try {
            const res = await fetch(`${BASE_URL}/translate/${lang}`, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ text }),
            });
            const data = await res.json();
            translateOutput.innerText = data.translation;
          } catch (error) {
            translateOutput.innerText =
              "Oops! Something went wrong. Please try again later.";
          }
        });

      const languageNames = {
        en: "English",
        it: "Italian",
        fr: "French",
        de: "German",
        es: "Spanish",
        pt: "Portuguese",
        ru: "Russian",
        zh: "Chinese",
        ja: "Japanese",
        ar: "Arabic",
        hi: "Hindi",
        nl: "Dutch",
        pl: "Polish",
        tr: "Turkish",
        sv: "Swedish",
        da: "Danish",
        fi: "Finnish",
        no: "Norwegian",
      };

      document
        .getElementById("languageSelect")
        .addEventListener("change", () => {
          const lang = document.getElementById("languageSelect").value;
          const btn = document.getElementById("translateBtn");
          btn.innerText = `Translate in ${languageNames[lang] || lang}`;
        });

      // Initialize button label on load
      document.addEventListener("DOMContentLoaded", () => {
        const lang = document.getElementById("languageSelect").value;
        document.getElementById("translateBtn").innerText = `Translate in ${
          languageNames[lang] || lang
        }`;

        // Clear output boxes
        document.getElementById("translateOutput").innerHTML =
          '<p class="text-gray-400 italic">The translation will appear here...</p>';
        document.getElementById("jokeOutput").innerHTML =
          '<p class="text-gray-400 italic">Your joke will appear here...</p>';
      });
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'9440ea628051ee76',t:'MTc0Nzk2NTE2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
    <iframe
      height="1"
      width="1"
      style="
        position: absolute;
        top: 0px;
        left: 0px;
        border: medium;
        visibility: hidden;
      "
    ></iframe>
  </body>
</html>
